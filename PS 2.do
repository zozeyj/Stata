*************************************
*******Reg4D PS2 YEJI KIM************
*************************************

//1.(a) Using the sample provided estimate the coefficients β0, β1 and β2.
. regress clr tfr gnpcap

/*
      Source |       SS           df       MS      Number of obs   =        90
-------------+----------------------------------   F(2, 87)        =     76.74
       Model |  13908.4412         2  6954.22062   Prob > F        =    0.0000
    Residual |  7884.08489        87  90.6216654   R-squared       =    0.6382
-------------+----------------------------------   Adj R-squared   =    0.6299
       Total |  21792.5261        89  244.859844   Root MSE        =    9.5195

------------------------------------------------------------------------------
         clr | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
         tfr |   5.464634   .8346604     6.55   0.000     3.805656    7.123612
      gnpcap |  -.0076052   .0019594    -3.88   0.000    -.0114996   -.0037107
       _cons |   .5121097   5.406369     0.09   0.925    -10.23363    11.25785
------------------------------------------------------------------------------*/

//ANS: CLR = 0.5121097 + 5.464634TFR - 0.0076052 GNPCAP + u, therefore B0 = 0.5121097, B1 = 5.46, B2=-0.0076

//1.(c) Calculate the correlation coefficient between GNPCAP and TFRHAT. What is the relationship between the correlation coefficient and the R-squared of the regression of TFR on GNPCAP?
. regress tfr gnpcap

/*      Source |       SS           df       MS      Number of obs   =        90
-------------+----------------------------------   F(1, 88)        =     61.25
       Model |  90.5449976         1  90.5449976   Prob > F        =    0.0000
    Residual |  130.080561        88  1.47818819   R-squared       =    0.4104
-------------+----------------------------------   Adj R-squared   =    0.4037
       Total |  220.625558        89  2.47893886   Root MSE        =    1.2158

------------------------------------------------------------------------------
         tfr | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      gnpcap |  -.0015039   .0001922    -7.83   0.000    -.0018857    -.001122
       _cons |   6.157143   .2144064    28.72   0.000     5.731055    6.583231
------------------------------------------------------------------------------*/

. predict tfrhat if e(sample)
//TFRHAT = a0 + a1 GNPCAP

. cor gnpcap tfrhat
/*(obs=90)

             |   gnpcap   tfrhat
-------------+------------------
      gnpcap |   1.0000
      tfrhat |  -1.0000   1.0000 */ 
	  
. regress tfr gnpcap
/*      Source |       SS           df       MS      Number of obs   =        90
-------------+----------------------------------   F(1, 88)        =     61.25
       Model |  90.5449976         1  90.5449976   Prob > F        =    0.0000
    Residual |  130.080561        88  1.47818819   R-squared       =    0.4104
-------------+----------------------------------   Adj R-squared   =    0.4037
       Total |  220.625558        89  2.47893886   Root MSE        =    1.2158

------------------------------------------------------------------------------
         tfr | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
      gnpcap |  -.0015039   .0001922    -7.83   0.000    -.0018857    -.001122
       _cons |   6.157143   .2144064    28.72   0.000     5.731055    6.583231
------------------------------------------------------------------------------*/

generate tfrresid = tfr-tfrhat

//1(d) Calculate and comment on the correlation between TFRRESID and GNPCAP 

. cor tfrresid gnpcap
(obs=90)

/*
             | tfrresid   gnpcap
-------------+------------------
    tfrresid |   1.0000
      gnpcap |  -0.0000   1.0000 */
	  

//1(e) 
regress clr tfrresid

/*      Source |       SS           df       MS      Number of obs   =        90
-------------+----------------------------------   F(1, 88)        =     19.09
       Model |   3884.4946         1   3884.4946   Prob > F        =    0.0000
    Residual |  17908.0315        88  203.500358   R-squared       =    0.1782
-------------+----------------------------------   Adj R-squared   =    0.1689
       Total |  21792.5261        89  244.859844   Root MSE        =    14.265

------------------------------------------------------------------------------
         clr | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
    tfrresid |   5.464634   1.250767     4.37   0.000     2.978997     7.95027
       _cons |   20.00389     1.5037    13.30   0.000      17.0156    22.99218
------------------------------------------------------------------------------*/

//2(2)
. generate lnexpend = log(expend)

. regress math10 lnexpend
/* 
      Source |       SS           df       MS      Number of obs   =       408
-------------+----------------------------------   F(1, 406)       =     12.41
       Model |  1329.42517         1  1329.42517   Prob > F        =    0.0005
    Residual |  43487.7553       406  107.112698   R-squared       =    0.0297
-------------+----------------------------------   Adj R-squared   =    0.0273
       Total |  44817.1805       407  110.115923   Root MSE        =     10.35

------------------------------------------------------------------------------
      math10 | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
    lnexpend |   11.16439   3.169011     3.52   0.000     4.934677    17.39411
       _cons |   -69.3411   26.53013    -2.61   0.009    -121.4947   -17.18753
------------------------------------------------------------------------------
*/


//2(5) 
. summarize lnexpend, detail

/*                          lnexpend
-------------------------------------------------------------
      Percentiles      Smallest
 1%     8.138857       8.111328
 5%     8.179761       8.130354
10%     8.207129       8.135933       Obs                 408
25%     8.248137        8.13798       Sum of wgt.         408

50%     8.329658                      Mean           8.370177
                        Largest       Std. dev.      .1618824
75%     8.446878        8.84376
90%     8.618304       8.846066       Variance       .0262059
95%     8.697346       8.858511       Skewness       1.076788
99%     8.830251       8.911799       Kurtosis       3.669486 */

//4(3)
. regress bwght cigs faminc

/*      Source |       SS           df       MS      Number of obs   =     1,388
-------------+----------------------------------   F(2, 1385)      =     21.27
       Model |  17126.2088         2  8563.10442   Prob > F        =    0.0000
    Residual |  557485.511     1,385  402.516614   R-squared       =    0.0298
-------------+----------------------------------   Adj R-squared   =    0.0284
       Total |   574611.72     1,387  414.283864   Root MSE        =    20.063

------------------------------------------------------------------------------
       bwght | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        cigs |  -.4634075   .0915768    -5.06   0.000    -.6430518   -.2837633
      faminc |   .0927647   .0291879     3.18   0.002     .0355075    .1500219
       _cons |   116.9741   1.048984   111.51   0.000     114.9164    119.0319
------------------------------------------------------------------------------*/

. regress bwght cigs

/*      Source |       SS           df       MS      Number of obs   =     1,388
-------------+----------------------------------   F(1, 1386)      =     32.24
       Model |  13060.4194         1  13060.4194   Prob > F        =    0.0000
    Residual |    561551.3     1,386  405.159668   R-squared       =    0.0227
-------------+----------------------------------   Adj R-squared   =    0.0220
       Total |   574611.72     1,387  414.283864   Root MSE        =    20.129

------------------------------------------------------------------------------
       bwght | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
        cigs |  -.5137721   .0904909    -5.68   0.000    -.6912861   -.3362581
       _cons |   119.7719   .5723407   209.27   0.000     118.6492    120.8946
------------------------------------------------------------------------------*/

//5(1)
. summarize prpblck, detail

/*                  proportion black, zipcode
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%     .0023693              0
10%     .0048807              0       Obs                 409
25%      .011649              0       Sum of wgt.         409

50%     .0414442                      Mean           .1134864
                        Largest       Std. dev.      .1824165
75%     .1210589       .9210559
90%     .3598951       .9210559       Variance       .0332758
95%     .5597082       .9624618       Skewness       2.700012
99%     .9210559       .9816579       Kurtosis       10.56841 */

. summarize income, detail

/*                median family income, zipcode
-------------------------------------------------------------
      Percentiles      Smallest
 1%        20216          15919
 5%        27759          18963
10%        31314          18963       Obs                 409
25%        37883          19931       Sum of wgt.         409

50%        46272                      Mean           47053.78
                        Largest       Std. dev.      13179.29
75%        54981          82084
90%        63905          82797       Variance       1.74e+08
95%        66939          83379       Skewness       .9628306
99%        80548         136529       Kurtosis       7.551386 */


//5(2)
. regress psoda prpblck income

/*      Source |       SS           df       MS      Number of obs   =       401
-------------+----------------------------------   F(2, 398)       =     13.66
       Model |  .202552215         2  .101276107   Prob > F        =    0.0000
    Residual |  2.95146493       398  .007415741   R-squared       =    0.0642
-------------+----------------------------------   Adj R-squared   =    0.0595
       Total |  3.15401715       400  .007885043   Root MSE        =    .08611

------------------------------------------------------------------------------
       psoda | Coefficient  Std. err.      t    P>|t|     [95% conf. interval]
-------------+----------------------------------------------------------------
     prpblck |   .1149882   .0260006     4.42   0.000     .0638724    .1661039
      income |   1.60e-06   3.62e-07     4.43   0.000     8.91e-07    2.31e-06
       _cons |   .9563196    .018992    50.35   0.000     .9189824    .9936568
------------------------------------------------------------------------------*/

//5(3)
. regress psoda prpblck

//5(6)
. cor lincome prppov
/*(obs=409)

             |  lincome   prppov
-------------+------------------
     lincome |   1.0000
      prppov |  -0.8385   1.0000*/

	  

